<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"22aliang.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"width":150,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Web 是怎麼運作的呢 ?   當你在瀏覽器輸入網址或點選鏈接時，瀏覽器會透過超文本傳輸協定（HTTP）向遠端的網頁伺服器發送請求（HTTP Request），網頁伺服器收到請求後，處理完成並回傳相對應的內容（HTTP Response）。 全球透過海底電纜通訊，網路以網路協定相連。">
<meta property="og:type" content="article">
<meta property="og:title" content="網路運作基礎筆記">
<meta property="og:url" content="https://22aliang.github.io/2023/03/13/%E7%B6%B2%E8%B7%AF%E9%81%8B%E4%BD%9C%E5%9F%BA%E7%A4%8E%E7%AD%86%E8%A8%98/index.html">
<meta property="og:site_name" content="22Nell&#39;s Blog">
<meta property="og:description" content="Web 是怎麼運作的呢 ?   當你在瀏覽器輸入網址或點選鏈接時，瀏覽器會透過超文本傳輸協定（HTTP）向遠端的網頁伺服器發送請求（HTTP Request），網頁伺服器收到請求後，處理完成並回傳相對應的內容（HTTP Response）。 全球透過海底電纜通訊，網路以網路協定相連。">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://i.imgur.com/eavypn1.jpg">
<meta property="og:image" content="https://developer.mozilla.org/en-US/docs/Learn/Server-side/First_steps/Client-Server_overview/basic_static_app_server.png">
<meta property="og:image" content="https://developer.mozilla.org/en-US/docs/Learn/Server-side/First_steps/Client-Server_overview/web_application_with_html_and_steps.png">
<meta property="og:image" content="https://i.imgur.com/kZpUL4S.png">
<meta property="og:image" content="https://i.imgur.com/7tce7Bd.jpg">
<meta property="og:image" content="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a21ed5c3-98b9-49a7-b248-82e0f2f57e65/Untitled.png">
<meta property="article:published_time" content="2023-03-13T04:58:17.062Z">
<meta property="article:modified_time" content="2024-05-13T12:47:08.230Z">
<meta property="article:author" content="Nell">
<meta property="article:tag" content="cs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/eavypn1.jpg">

<link rel="canonical" href="https://22aliang.github.io/2023/03/13/%E7%B6%B2%E8%B7%AF%E9%81%8B%E4%BD%9C%E5%9F%BA%E7%A4%8E%E7%AD%86%E8%A8%98/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-TW'
  };
</script>

  <title>網路運作基礎筆記 | 22Nell's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="22Nell's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">22Nell's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Notes of a Rookie Engineer</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/22aliang" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://22aliang.github.io/2023/03/13/%E7%B6%B2%E8%B7%AF%E9%81%8B%E4%BD%9C%E5%9F%BA%E7%A4%8E%E7%AD%86%E8%A8%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nell">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="22Nell's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          網路運作基礎筆記
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2023-03-13 12:58:17" itemprop="dateCreated datePublished" datetime="2023-03-13T12:58:17+08:00">2023-03-13</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%B6%85%E6%96%B0%E6%89%8B%E6%99%82%E6%9C%9F%E5%9F%BA%E7%A4%8E%E7%AD%86%E8%A8%98/" itemprop="url" rel="index"><span itemprop="name">超新手時期基礎筆記</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="閱讀次數" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">閱讀次數：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Web-是怎麼運作的呢"><a href="#Web-是怎麼運作的呢" class="headerlink" title="Web 是怎麼運作的呢 ?"></a>Web 是怎麼運作的呢 ?</h2><p>  <img src="https://i.imgur.com/eavypn1.jpg" alt="Server-side website programming"></p>
<p>當你在瀏覽器輸入網址或點選鏈接時，瀏覽器會透過超文本傳輸協定（HTTP）向遠端的網頁伺服器發送請求（HTTP Request），網頁伺服器收到請求後，處理完成並回傳相對應的內容（HTTP Response）。</p>
<p>全球透過海底電纜通訊，網路以網路協定相連。</p>
<span id="more"></span>

<h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h3><p>domain name servers 轉換IP與URL的服務</p>
<p>真正的網址 : 四個範圍 0-255  &#x2F; 2的8次方 8bit 256種 0~255</p>
<h3 id="靜態網頁-Static-sites"><a href="#靜態網頁-Static-sites" class="headerlink" title="靜態網頁 Static sites"></a>靜態網頁 Static sites</h3><p>  <img src="https://developer.mozilla.org/en-US/docs/Learn/Server-side/First_steps/Client-Server_overview/basic_static_app_server.png" alt="Static sites | 圖源1"></p>
<p>  靜態網頁主要由 HTML、CSS 以及 JavaScript 構成。當瀏覽器請求這些文件時，伺服器直接返回文件內容。</p>
<h3 id="動態網頁-Dynamic-sites"><a href="#動態網頁-Dynamic-sites" class="headerlink" title="動態網頁 Dynamic sites"></a>動態網頁 Dynamic sites</h3><p>  <img src="https://developer.mozilla.org/en-US/docs/Learn/Server-side/First_steps/Client-Server_overview/web_application_with_html_and_steps.png" alt="Dynamic sites | 圖源1 "></p>
<p>  動態網頁則是在伺服器端處理，動態生成網頁內容。伺服器將數據和模板結合，生成 HTML，再返回給瀏覽器。</p>
<h3 id="用戶端-Client-side"><a href="#用戶端-Client-side" class="headerlink" title="用戶端 Client side"></a>用戶端 Client side</h3><p>用戶端的技術主要包括 HTML、CSS 和 JavaScript，用來構建用戶界面並處理與用戶的互動。</p>
<h3 id="伺服器端-Sever-side"><a href="#伺服器端-Sever-side" class="headerlink" title="伺服器端 Sever-side"></a>伺服器端 Sever-side</h3><p>伺服器端的開發使用如 PHP、Python、Java、C# 和 NodeJS 等語言，負責數據處理、用戶驗證、存儲管理等後端任務。</p>
<h2 id="什麼是-HTTP"><a href="#什麼是-HTTP" class="headerlink" title="什麼是 HTTP ?"></a>什麼是 HTTP ?</h2><p>HTTP 是建立在 TCP&#x2F;IP 協議之上的應用層協議，用於在網路上傳輸超文本數據。HTTPS 則是帶有安全層的 HTTP，使用 SSL&#x2F;TLS 進行加密處理，預設端口為 443。</p>
<blockquote>
<p>詳細影片 | Will <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=Taq5TV1K4XU">保哥｜初學者都該學會的 HTTP 通訊協定基礎</a></p>
</blockquote>
<h3 id="基於-Restful-API-的-Http-Request-Method"><a href="#基於-Restful-API-的-Http-Request-Method" class="headerlink" title="基於 Restful API 的 Http Request Method"></a>基於 Restful API 的 Http Request Method</h3><ul>
<li><p>當你在網路點擊一個連結、提交一個表單、進行一次搜索等…瀏覽器都會發送一個HTTP給伺服器。</p>
</li>
<li><p>以下是基於 Restful API 常見的</p>
</li>
<li><p><code>GET</code> 拿取資料 (應只用在顯示、讀取用途)</p>
</li>
<li><p><code>POST</code> 上傳資料，請求伺服器處理 ( 如提交表單、上傳檔案，可能建立、修改現有資源)</p>
</li>
<li><p><code>PUT</code> 覆蓋資料(全部)</p>
</li>
<li><p><code>PATCH</code> 更新資料(可部分更新)</p>
</li>
<li><p><code>DELETE</code> 刪除資料</p>
</li>
<li><p><code>OPTIONS</code> 使伺服器回傳該資源支援的所有HTTP請求方法</p>
</li>
</ul>
<h3 id="基於-Restful-API-的-Status-Code"><a href="#基於-Restful-API-的-Status-Code" class="headerlink" title="基於 Restful API 的 Status Code"></a>基於 Restful API 的 Status Code</h3><ul>
<li><code>1xx</code> ：信息 Informational 接收到request了 需要繼續處理100 Continue：Server 成功接收、但 Client 還要進行一些處理。</li>
<li><code>2xx</code>：成功 Successful : 200 0K：請求成功 、201 Created：資源已經被創建，POST、PUT 後可能會收到這樣的回應、204 No Content：成功但沒有回傳的內容（當你發出 Delete 的 request）</li>
<li><code>3xx</code>：重定向、轉址 (Redirects)301 Moved Permanently : 請求的網址已經搬家囉</li>
<li><code>4xx</code>：用戶端的錯誤 (Client Errors) 可能格式寫錯或漏寫400 Bad Request：請求格式寫錯、資源太大401 Unauthorized：未取得授權、檢視 API 的授權方式、登入等…、403 Forbidden：使用錯誤的驗證404：找不到資源，通常是路徑錯誤，大多是前端的路徑輸入錯誤、422：請求是正確的，可能不符合操作流程（大多可從後端的回應中找到問題）、429：請求次數過多，後端封鎖。</li>
<li><code>5xx</code>：伺服器端錯誤 (Server Errors) 伺服器當機、機台燒掉、500 Internal Server Error：伺服器出錯，搶票之類的</li>
</ul>
<blockquote>
<p>詳細 RFC 7231 | <a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/html/rfc7231#section-6.3.1">https://datatracker.ietf.org/doc/html/rfc7231#section-6.3.1</a></p>
</blockquote>
<p><img src="https://i.imgur.com/kZpUL4S.png" alt="chrome devtools"><br>使用 Google Chrome 按 F12 開啟開發者工具，可在 Network 標籤下檢視網頁發出的請求和接收到的響應，有助於優化網頁性能。</p>
<h2 id="Restful-API"><a href="#Restful-API" class="headerlink" title="Restful API"></a>Restful API</h2><p>表現層狀態轉換 Representational State Transger ，是一種全球資訊網軟體架構風格，目的在方便不同軟體&#x2F;程式在網路 ( 例 www ) 互相傳遞</p>
<p>REST 是基於 HTTP 超文字傳輸協定上確定的一組約束和屬性</p>
<p>REST 本身不是一套標準，而是設計風格。</p>
<p>現代 API 製作採用的設計風格就是 REST ，aka . RESTful APIs</p>
<p>允許使用者端發出統一資源標識符 ( URI ) 存取和操作網路資源。</p>
<p>通常 Path 是比較一致的</p>
<p>網頁瀏覽器只能送出 GET、POST 這兩種 Request，其他可以用 Postman 來使用</p>
<h2 id="Program-Process-Thread-三者關係"><a href="#Program-Process-Thread-三者關係" class="headerlink" title="Program, Process, Thread 三者關係"></a>Program, Process, Thread 三者關係</h2><p><img src="https://i.imgur.com/7tce7Bd.jpg" alt="Program, Process, Thread"></p>
<p>這三者的關係可以通過以下比喻來理解：程式（Program）是一本劇本，進程（Process）是舞台上的一個表演，線程（Thread）則是表演中的每一個獨立角色。</p>
<h3 id="Race-Condition-競態條件"><a href="#Race-Condition-競態條件" class="headerlink" title="Race Condition 競態條件"></a>Race Condition 競態條件</h3><p>在電腦科學中，進程 process 是正在執行的程式，執行緒 thread 可以由程序調度員 scheduler 作業系統內的工程，獨立管理輕量級進程。</p>
<p>一個 process 內可以有多個 threads </p>
<p>絕大多數時間，CPU都是閒置 ( threads 可能會需要等待 I&#x2F;O )</p>
<p>因此我們可以寫出內部含有多個 threads 的程式，讓 threads 被多個 CPU 並進執行，提高效率</p>
<p>這就是很多程式語言都支援的 </p>
<p>multi-threaded prmgramming</p>
<p>當兩個以上的 thread 訪問一個共享資源 shared resource 時，會發生 race condition 可能會造成無法預期的狀況或 bug</p>
<p>分割執行緒</p>
<p>要避免 Race Condition，可以透過劃分 critical region，程式當中訪問 shared resource 被稱為 Critical Region ，每當要進去 critical region 前先把 shared resource 上鎖，離開後在解鎖。</p>
<p>Lock 也稱為 mutex ( mutual exclustion lock ) 在進入 Critical Region 前，mutex 會檢查是否可以進入， Mutex 另外一個名字是 binary semaphore</p>
<h3 id="瀏覽器"><a href="#瀏覽器" class="headerlink" title="瀏覽器"></a>瀏覽器</h3><p>包含兩個主要功能</p>
<ol>
<li>排版引擎 layout engine，將HTML轉換成視覺表示</li>
<li>Javescript引擎</li>
</ol>
<h2 id="參考-Reference"><a href="#參考-Reference" class="headerlink" title="參考 Reference"></a>參考 Reference</h2><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-TW/docs/Learn/Server-side/First_steps/Introduction">MDN</a><br>圖源 1 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/First_steps/Client-Server_overview">MDN | Client-Server Overview</a></p>
<h2 id="學習資料"><a href="#學習資料" class="headerlink" title="學習資料"></a>學習資料</h2><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=QuCu4iDpPTU&t=1871s">六角學院｜前後端都該理解的計算機概論</a><br><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=7_LPdttKXPc">Aaron｜How the Internet Works in 5 Minutes</a><br><a target="_blank" rel="noopener" href="https://hulitw.medium.com/learning-tcp-ip-http-via-sending-letter-5d3299203660">Huli｜從傳紙條輕鬆學習基本網路概念</a></p>
<h2 id="讀書清單"><a href="#讀書清單" class="headerlink" title="讀書清單"></a>讀書清單</h2><p>恐龍書 Operation System Concepts<br><a target="_blank" rel="noopener" href="https://www.rfc-editor.org/rfc/rfc2616">RFC 2616</a></p>
<h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><p>Cookies 是伺服器傳送給瀏覽器，並在客戶端下次訪問同一網站時一同發回的一小段文字</p>
<p>可以幫助網站保留使用者偏好設置 ( 例如 登入帳號、語言、字體大小 … )<br>在 Chrome 內 點選 setting 點 privacy and security 在點 cookies and site data 舊可以看到所有的 Cookie ( 管理 cookie )</p>
<h3 id="資料型態"><a href="#資料型態" class="headerlink" title="資料型態"></a>資料型態</h3><p>key-value pair </p>
<p>在express 設定 cookie 方法是</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">res.<span class="property">cookie</span> ( key, value )</span><br><span class="line"></span><br><span class="line"><span class="comment">//示範</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cookieParser = <span class="built_in">require</span>(<span class="string">&quot;cookie-parser&quot;</span>);</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cookieParser</span>());</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/setCookie&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">cookie</span>(<span class="string">&quot;yourcookie&quot;</span>,<span class="string">&quot;value&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">send</span>(<span class="string">&quot;已經設置cookie&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/seeCookie&quot;</span>,<span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">send</span>(<span class="string">&quot;看看這cookie&quot;</span> + req.<span class="property">cookies</span>.<span class="property">yourcookie</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//會印在網頁上</span></span><br></pre></td></tr></table></figure>

<h3 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie">MDN 文件</a>，將 Cookie 存入、用 JS 取出 cookie</p>
<p>附上範例程式碼：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; token, expired &#125; = res.<span class="property">data</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = hexToken=$&#123;token&#125;; expires=$&#123;<span class="keyword">new</span> <span class="title class_">Date</span>(expired)&#125;;;</span><br></pre></td></tr></table></figure>

<p>Axios 文件，</p>
<p>設定預設 Cookies Headers：<a target="_blank" rel="noopener" href="https://github.com/axios/axios#global-axios-defaults">https://github.com/axios/axios#global-axios-defaults</a></p>
<p>範例程式碼：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> token = <span class="variable language_">document</span>.<span class="property">cookie</span></span><br><span class="line">.<span class="title function_">split</span>(<span class="string">&#x27;; &#x27;</span>)</span><br><span class="line">.<span class="title function_">find</span>(<span class="function">(<span class="params">row</span>) =&gt;</span> row.<span class="title function_">startsWith</span>(<span class="string">&#x27;hexToken=&#x27;</span>))</span><br><span class="line">?.<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">headers</span>.<span class="property">common</span>[<span class="string">&#x27;Authorization&#x27;</span>] = token;</span><br></pre></td></tr></table></figure>

<h3 id="CORS-跨來源資源共用"><a href="#CORS-跨來源資源共用" class="headerlink" title="CORS 跨來源資源共用"></a>CORS 跨來源資源共用</h3><p><strong>Cross-Origin Resource Sharing | <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">MDN</a></strong></p>
<p>跨來源請求 : 同源政策下不允許讀取，缺少 CORS Access Control Allow Origin  的擋頭</p>
<h1 id="成為看起來很強的後端-閱讀心得筆記"><a href="#成為看起來很強的後端-閱讀心得筆記" class="headerlink" title="成為看起來很強的後端 | 閱讀心得筆記"></a>成為看起來很強的後端 | 閱讀心得筆記</h1><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=HMX4KSDtfpw&list=PLS5AiLcCHgNxd341NwuY9EOpVvY5Z8VOs&index=1">影片網址</a></p>
<h3 id="Sessions"><a href="#Sessions" class="headerlink" title="Sessions"></a>Sessions</h3><p>cookies 的問題 : </p>
<ol>
<li>使用 cookies 只能儲存 4095 bytes </li>
<li>cookie 會被客戶端亂搞</li>
</ol>
<hr>
<p>Session 是網路伺服器上的儲存空間，當使用者登入網頁時，伺服器會製作 session id 、相對應資料</p>
<p>session id 會被當 cookie 送到伺服器，就解決 cookie 的問題惹</p>
<p>發送 session id 也可以進行簽名</p>
<h3 id="環境變數-environment-varailbe"><a href="#環境變數-environment-varailbe" class="headerlink" title="環境變數 environment varailbe"></a>環境變數 environment varailbe</h3><p>直接在程式碼內儲存秘密會被告吧</p>
<p>通常會把秘密存在環境變數內部，環境變數 environment varailbe 是動態的值，可以影響電腦上運行的程式。</p>
<p>在 Node.js 使用 <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/dotenv">dotenv</a> 套件，透過 process 物件的 env 屬性獲得環境變數</p>
<p>如果在雲端部屬伺服器，雲端供應商應該有秘密管理工具 ( AWS Secret Manager )</p>
<p>Flash 是 session 特別儲存空間 ，可以用 connect-flash 套件</p>
<h3 id="資安基本觀念"><a href="#資安基本觀念" class="headerlink" title="資安基本觀念"></a>資安基本觀念</h3><p>在我們的數據庫中以純文字的形式存儲密碼</p>
<ol>
<li>駭客會可以駭入</li>
<li>內部員工也可以看到</li>
</ol>
<p>因此密碼存到數據庫之前會進行轉換 ( 雜湊 hash )、加密 ( encrypt ) 通常可以解密 (危)</p>
<p>未加密的密碼 明文 plantext — 加密 encrypt —&gt; 密文 cipher  ( 解密 decrpt ) </p>
<p>密碼以雜湊值 ( hash values ) 儲存在 數據庫 跟 本地端 </p>
<p>可以使用 SHA 家族演算法對密碼進行雜湊處理 ( 速度快 )</p>
<h3 id="密碼加鹽-salt"><a href="#密碼加鹽-salt" class="headerlink" title="密碼加鹽 salt"></a>密碼加鹽 salt</h3><p>雜湊前添加一點鹽 salt 在去做雜湊</p>
<p>在數據庫中通常會存儲 雜湊值 、 鹽 兩個部分<br>驗證時會將兩個湊在一起</p>
<p>所以多數忘記密碼時是真的沒辦法恢復密碼</p>
<h3 id="Bcrypt"><a href="#Bcrypt" class="headerlink" title="Bcrypt"></a>Bcrypt</h3><p>是根據 Blowfish 加密演算法設計的密碼雜湊函式，使用時可以客製化 slat round 數字越大，雜湊運算時間越久</p>
<h3 id="我們怎麼執行一個瀏覽器"><a href="#我們怎麼執行一個瀏覽器" class="headerlink" title="我們怎麼執行一個瀏覽器"></a>我們怎麼執行一個瀏覽器</h3><p>先從  </p>
<p>Browser 瀏覽器 &lt;—&gt; WiFi、網路 &lt;—&gt; 路由器Router &lt;—&gt; Proxy Server (快取)&lt;—&gt; DNS 域名解析 (URL轉換成IP)  &lt;—&gt; 跑到特定伺服器 Server</p>
<p>進到 Server 後 : </p>
<p>Requset —&gt; Load Blacne 複雜平衡(流量比較大時做分流) —&gt; 分配到不同的伺服器 Server(硬體) WebServer (網頁伺服器) python&#x2F;flack、node&#x2F;experss —&gt;第一種直接接受—&gt;中控台 Reverse Proxy 反向代理 ( 一些憑證、快取可以掛在代理身上 ) —&gt;port 埠號回復Respoues </p>
<h3 id="TCP-x2F-IP-協議"><a href="#TCP-x2F-IP-協議" class="headerlink" title="TCP&#x2F;IP 協議"></a>TCP&#x2F;IP 協議</h3><p>他會一層層封包過去，在最後解封</p>
<p>從外到內 ( 應用層Application &#x2F; RTSP(大多走UDP)、HTTP、FTP —&gt;傳輸層Transport &#x2F;TCP( 三次握手 ) 、UDP( 類似語音通話 )—&gt;網路層Inernet IP —&gt;連接層Link (底層怎麼運輸我們不知道、光纖)</p>
<h2 id="應用層-Application"><a href="#應用層-Application" class="headerlink" title="應用層 Application"></a>應用層 Application</h2><h3 id="HTTP-x2F-HTTPS"><a href="#HTTP-x2F-HTTPS" class="headerlink" title="HTTP&#x2F;HTTPS"></a>HTTP&#x2F;HTTPS</h3><p>常見寫法是 第一個字母大寫，第二個自己用 - 連接</p>
<p>主要傳遞途徑 短連接resqest 、 reponse </p>
<p>HTTP 由 Header 和 Body 組成</p>
<p>Header 裡常見的資訊有 meta information：</p>
<ul>
<li>MethodGET、POST、UPDATE、DELETE</li>
<li>Host欲要連線的 hostname</li>
<li>Path欲要連線的 host 的 path</li>
<li>Origin 來源</li>
<li>User-Agent連線者的瀏覽器名稱</li>
<li>Content-Type : Body 帶什麼格式，需要怎麼解西</li>
</ul>
<p>若為 GET 的 requestBody 裡可能就沒有資料若為 POST 的 request會存放相關資料在 Body 裡</p>
<p>Body 常見格式</p>
<p>application &#x2F; JSON</p>
<p>multipart</p>
<p>text </p>
<h3 id="FTP-x2F-SFTP"><a href="#FTP-x2F-SFTP" class="headerlink" title="FTP &#x2F; SFTP"></a>FTP &#x2F; SFTP</h3><h3 id="Telenet-x2F-x2F-ptt-cc"><a href="#Telenet-x2F-x2F-ptt-cc" class="headerlink" title="Telenet : &#x2F;&#x2F; ptt.cc"></a>Telenet : &#x2F;&#x2F; ptt.cc</h3><h3 id="SMTP-x2F-POP3-信件收發Eail"><a href="#SMTP-x2F-POP3-信件收發Eail" class="headerlink" title="SMTP &#x2F; POP3 信件收發Eail"></a>SMTP &#x2F; POP3 信件收發Eail</h3><h3 id="WS-x2F-WSS"><a href="#WS-x2F-WSS" class="headerlink" title="WS &#x2F; WSS"></a>WS &#x2F; WSS</h3><p>低延遲 長連接 會建立一個通道就不會斷掉 ( 遊戲常用)</p>
<h3 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h3><p>ssh金鑰匙</p>
<h3 id="RTSP-x2F-RTMP"><a href="#RTSP-x2F-RTMP" class="headerlink" title="RTSP&#x2F; RTMP"></a>RTSP&#x2F; RTMP</h3><p>串流用，把影片切片段傳輸</p>
<h2 id="權限-101"><a href="#權限-101" class="headerlink" title="權限 101"></a>權限 101</h2><h3 id="Client-to-Server"><a href="#Client-to-Server" class="headerlink" title="Client to Server"></a>Client to Server</h3><p>Browser &#x2F; APP  like : 會員登入、scope. name. email  —&gt; 第三方登入、APP登入 ( 會丟一個 Token ) </p>
<h3 id="Server-to-Server"><a href="#Server-to-Server" class="headerlink" title="Server to Server"></a>Server to Server</h3><p>因為在防火牆後，通常會比較簡單，伺服器跟伺服器端做對接</p>
<p>Authentication 驗證 | 你是學生</p>
<p>Authorization 授權 |但你不能用教師電梯</p>
<p>HTTP Status Code</p>
<p>2xx 成功、200 OK</p>
<p>404 Not found、401 是驗證沒過、403是授權沒過<br>500 伺服器掛掉、504 超過30秒反應太慢、502 斷掉</p>
<h3 id="Token-權杖-x2F-令牌"><a href="#Token-權杖-x2F-令牌" class="headerlink" title="Token 權杖&#x2F;令牌"></a>Token 權杖&#x2F;令牌</h3><p>Event-based 一個事件觸發(購買東西銀行端驗證簡訊)  OTP 一次性</p>
<p>Time-based 有時效性的(忘記密碼) Token</p>
<p>Static 密碼</p>
<h3 id="雜湊-Hash-單"><a href="#雜湊-Hash-單" class="headerlink" title="雜湊 Hash 單"></a>雜湊 Hash 單</h3><p>比較像單向的，透過 Hash function 去雜湊變成很難變成原來樣子</p>
<p>常見方式 msd&#x2F;sha256 、md5(可能會被破解危險)</p>
<p>但可以找回來，叫做查表 </p>
<p>常見的表格有 Rrainbow Table</p>
<p>重複性雜湊 ( 會有時間問題 ) 大概 2~3 次</p>
<h3 id="編碼-Encdoe-雙"><a href="#編碼-Encdoe-雙" class="headerlink" title="編碼 Encdoe 雙"></a>編碼 Encdoe 雙</h3><p>是屬於雙向的，透過一個Encode 轉變，Decode再轉回來</p>
<p>base64 壓縮率比較高 ( 大頭貼透過base64轉成文字 A12X9+&#x3D;&#x3D; )(a<del>z、A</del>Z、0~9)</p>
<p>hex (16進制編碼 a<del>f、0</del>9)</p>
<h3 id="加密-Enarypt-雙-key"><a href="#加密-Enarypt-雙-key" class="headerlink" title="加密 Enarypt 雙 + key"></a>加密 Enarypt 雙 + key</h3><p>可以上鎖Encrypt、可以在解鎖Decrypt</p>
<p>有兩種、對稱式加密 AES (同一把鎖) 、 比較安全 :非對稱式加密 SSL ( 加密(公鑰)、解鎖(私鑰))</p>
<h3 id="API-Key"><a href="#API-Key" class="headerlink" title="API Key"></a>API Key</h3><p>(寫得好要藏好，要藏在Server上)</p>
<p>Server to Server 驗證</p>
<p>Custom  → X 當開頭</p>
<p>Http Header : X-Api-Key : admin </p>
<p>產生API Key  1.寫死  2.DB   |  有可能 1.DEL 刪除  2.EXP 過期</p>
<h3 id="Http-Basic-Authentication-登入驗證-但會把-password-暴露在外面"><a href="#Http-Basic-Authentication-登入驗證-但會把-password-暴露在外面" class="headerlink" title="Http Basic Authentication 登入驗證 | 但會把 password 暴露在外面"></a>Http Basic Authentication 登入驗證 | 但會把 password 暴露在外面</h3><p>多用戶管理模式、類似API key 的模式</p>
<p>Http Header -Authorization : Basic Token( username password(密碼有非法字元傳輸要重新編碼 base64編碼 (username : password ) )  Server 可以跳彈跳視窗讓使用者做challoenge</p>
<p>簡單的帳號密碼登入要小心 log日誌 看到</p>
<ol>
<li>&#x2F;login ? uesername &#x3D; kk &amp;&amp; password &#x3D; 1234</li>
<li>&#x2F;orders Authonization : Basc ( kk : 1234)</li>
<li>&#x2F;lohin { username: “kk”, password: “1234” } 放在 body</li>
</ol>
<h3 id="JWT-x3D-json-web-token"><a href="#JWT-x3D-json-web-token" class="headerlink" title="JWT &#x3D; json web token"></a>JWT &#x3D; json web token</h3><p>JWT 放在 locastge ( 可以拿到整包token去解析)</p>
<p>Authorization : Brarer Token &#x2F; 注意</p>
<p>第一次登入用 body 帶 username password 登入</p>
<p>server 驗證 db 過把 token 給 client </p>
<p>可以降低伺服器壓力</p>
<p>JWT 由 Header ( 他是json，並用 base64編碼 )、Payload ( 隱含資訊也是 base64編碼 )( 絕對不能放機密資訊 )、Signature ( 把 Header、padload 綁起來做雜湊 hash ) secret  ⇒ sigrature 無狀態驗證 可以無限擴張</p>
<p>Load Balancing</p>
<ul>
<li>如果貴司的服務真的用一台 server 無法負荷的話，會用多台 server 同時提供同個服務</li>
<li>這是為了能將請求的流量分散到多台機器上，而不是吃死一台的資源 ，簡稱 Load Balancing</li>
<li>沒特別設定的話，預設都是 Round Robin，也就是請求進來是輪流平均分配給每一台提供相同服務的 server，<br>其它的演算法如 Least Connections, IP Hash, Least Response Time …</li>
</ul>
<p>設定</p>
<ul>
<li>設定的話可以在 HLB(硬體處理) e.g. 我們客戶是用 <em>NetScaler</em>)</li>
<li>也可以在SLB(軟體處理e.g. HAProxy, Critix, Nginx …etc.)</li>
</ul>
<p>Sticky session</p>
<ul>
<li>正如前面說的預設是 Round Robin，但如果我就是想曾經處理過某個 client 的請求 backend，在 load balancer 後續遇到同一個 client 的時候都導向同一台 backend 怎麼辦？</li>
<li>這時用到的技巧就叫 Sticky session 又稱 <em>Session Affinity</em>，它的作用就是識別請求中的某種唯一值(e.g. client ip)，並透過某種方式記錄(e.g. cookie)，知道這個請求應該要導給哪一台機器</li>
<li>後端如果是用 Spring 可以搭配 Spring Session 方便搭配 Spring Security 管理，而 Spring Session 的 Storage 又可以再搭配 REDIS(內建支援，但要設定)，但這前提是你用的是 JSESSIONID，預設 Spring Session 預設並不支援 JWT</li>
</ul>
<p>小結</p>
<ul>
<li>如果要達到 Sticky Session<ul>
<li>先找到你的 Load Balancer 是硬體還軟體，查或問一下怎麼設定</li>
<li>再找到你提供同個服務的 Backend 看它原本的 Authorization 是走什麼機制，再做對應的處理(如果需要)</li>
</ul>
</li>
</ul>
<p>JWT 保存方式、Payload不要放特別資訊、Header 可能是 HMAC、SHA256  </p>
<h3 id="JOSE"><a href="#JOSE" class="headerlink" title="JOSE"></a>JOSE</h3><p>JWA | 登入驗證</p>
<p>JWK | 使用金鑰</p>
<p>JWE | 如何進行加密</p>
<p>JWS | 簽署token</p>
<h3 id="Cookie-運作方式"><a href="#Cookie-運作方式" class="headerlink" title="Cookie 運作方式"></a>Cookie 運作方式</h3><p>儲存在瀏覽器的小份資料</p>
<p>也可以用 Cookie 做驗證 ( 不用token )</p>
<p>Session 會話&#x2F;對話 ( 一段時間的狀態 ) 一個概念</p>
<p>Browser → &#x2F;login resquest header—&gt; server</p>
<p>Set cookie ( 瀏覽器會自動儲存、有安全性，壞處是危險跟可能被更改 ) </p>
<p>Brower —&gt;header&#x2F;login &#x3D; true resquest —&gt;server</p>
<p>安全性 : session baseed cookie 去加密 &#x2F;login &#x3D; true </p>
<p>加密多一個步驟 ( 延遲 ) 、長度變長 ( 已經沒人再用惹 )</p>
<p>純 session data 資料存在伺服器端 ( 大部分都在做這個，用序號來代替資料 )</p>
<p>Brower —&gt;header Set cookie side &#x3D; C01  —&gt;server—seesion dtat stone</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a21ed5c3-98b9-49a7-b248-82e0f2f57e65/Untitled.png" alt="Untitled"></p>
<h3 id="Cookie-保護方式"><a href="#Cookie-保護方式" class="headerlink" title="Cookie 保護方式"></a>Cookie 保護方式</h3><ol>
<li>按照作用域設定</li>
</ol>
<p>第一、二方Cookie</p>
<p>相同網域</p>
<p>設定 Cookie 不要被濫用</p>
<p>Domain &#x3D; <a target="_blank" rel="noopener" href="http://api.example.com/">api.example</a>.com</p>
<p>Path &#x3D; &#x2F;login、&#x2F;orders</p>
<p>Secere</p>
<ol>
<li>Persihtent Cookie 有時效性的</li>
</ol>
<p>Expires ( 時間 2022&#x2F;11&#x2F;7) 、Max-Age ( 存活長度 1day )</p>
<p>第三方Cookie</p>
<p>瀏覽器與伺服器的網域不同、跨網域追蹤 GA.. ( 關掉可防止追蹤、但大型通常都共用 api )</p>
<p>SameSite三種模式 : Sirtct 只允許第一方Cookie &#x2F; none &#x2F; lax 部分看只看Get ( Server設定)</p>
<h3 id="Cookie-儲存方式"><a href="#Cookie-儲存方式" class="headerlink" title="Cookie 儲存方式"></a>Cookie 儲存方式</h3><p>禁止開發者對cookite做壞事 : HttpOnly </p>
<h3 id="安全的-Token-Cookie"><a href="#安全的-Token-Cookie" class="headerlink" title="安全的 Token Cookie"></a>安全的 Token Cookie</h3><p><a target="_blank" rel="noopener" href="https://hasura.io/blog/best-practices-of-using-jwt-with-graphql/">https://hasura.io/blog/best-practices-of-using-jwt-with-graphql/</a></p>
<ol>
<li><p>JWT 是用 Token 放在autherition benear </p>
<p> 儲存方式 : locastage 問題 : 可以用 JS 拿到 token 解法 : Http Only cookie</p>
<p> JWT 2.0 Server 會沒辦法驗證，需要由Client 去做額外的處理，所以變成發兩次，第一次用 In-Memory 把JWT存在記憶體 ( 存取完就消失) refresh-token ( 會有一個使用期限 大概30天)、第二次拿 auth-token ( 跟權限有關的)，缺點是頻繁溝通</p>
</li>
</ol>
<p>Session &#x2F; Cookie 會自動帶 cookie</p>
<h3 id="要怎麼選擇"><a href="#要怎麼選擇" class="headerlink" title="要怎麼選擇 ?"></a>要怎麼選擇 ?</h3><p>靜態通常可以選 JWT 前後端分離</p>
<p>Session &#x2F; Cookie SSR </p>
<h3 id="Oauth-2"><a href="#Oauth-2" class="headerlink" title="Oauth 2"></a>Oauth 2</h3><p>第三方串接</p>
<ol>
<li>code 模式 code &#x3D; foo (google…) token ←-&gt; </li>
<li>token ( 打一次)</li>
</ol>
<p>按鈕就像超連結  <a target="_blank" rel="noopener" href="https://oateh2.fac./?readict">https://oateh2.fac./?readict</a> &#x3D;xxx &amp;type&#x3D;token(cookie)&amp;secpe &#x3D; email;profile</p>
<p>用後端去做 ( 不會接觸到Client) | 301 token 用白名單去篩選 轉址過去 redienct </p>
<p>Token &#x2F; code 在 Clinet 在 記憶體上 merony ( 但容易外流 有點危險 ) </p>
<h3 id="運算是什麼"><a href="#運算是什麼" class="headerlink" title="運算是什麼 ?"></a>運算是什麼 ?</h3><p>Browser 本地 —&gt; Server 雲裝置</p>
<p>單一運算 | 垂直擴充</p>
<p>平行運算 | 很好的擴展、水平擴充，讓很多人一起去算一個東西</p>
<p>網格運算 |  兩個維度</p>
<h3 id="Webhook"><a href="#Webhook" class="headerlink" title="Webhook"></a>Webhook</h3><p>金流串接</p>
<p>使用者行為 Actior —&gt; Server 上的 Action2 ( 第三方金流 Webhook ) 觸發 —&gt;HTTP POST &#x2F;list 我們寫的後端 Server 會開一支 API 給第三方接資料，跟我們自己的 DB 串接</p>
<p>name、type、palyoad、 </p>
<p>Github</p>
<p>CI&#x2F;CD 後端會幫我們部屬網站</p>
<p>主詞是誰 ? 決定誰 in 誰 out ( 寫反資料會打不進去 ) </p>
<p>Incoming &#x2F; outaing </p>
<p>unbooud &#x2F; outbound </p>
<p>Client —&gt; Server —&gt; Handler</p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-license">
    <strong>版權聲明： </strong>本網誌所有文章除特別聲明外，均採用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 許可協議。轉載請註明出處！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/cs/" rel="tag"><i class="fa fa-tag"></i> cs</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item"></div>
      <div class="post-nav-item">
    <a href="/2023/03/15/%E8%A9%A6%E8%A3%9D%20utterances%20%E7%95%99%E8%A8%80%E6%9D%BF/" rel="next" title="Hexo | 試裝 utterances 留言板">
      Hexo | 試裝 utterances 留言板 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
<div>
    <section id="comments" class="comments">
    <style>
        .utterances{max-width: 100%;}
      </style>
      <script src="https://utteranc.es/client.js"
              repo="22aliang/22aliang.github.io"
              issue-term="title"
              label="💬"
              theme="github-dark"
              crossorigin="anonymous"
              async>
      </script>
  </section>
</div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Web-%E6%98%AF%E6%80%8E%E9%BA%BC%E9%81%8B%E4%BD%9C%E7%9A%84%E5%91%A2"><span class="nav-number">1.</span> <span class="nav-text">Web 是怎麼運作的呢 ?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DNS"><span class="nav-number">1.1.</span> <span class="nav-text">DNS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%9C%E6%85%8B%E7%B6%B2%E9%A0%81-Static-sites"><span class="nav-number">1.2.</span> <span class="nav-text">靜態網頁 Static sites</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8B%95%E6%85%8B%E7%B6%B2%E9%A0%81-Dynamic-sites"><span class="nav-number">1.3.</span> <span class="nav-text">動態網頁 Dynamic sites</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%88%B6%E7%AB%AF-Client-side"><span class="nav-number">1.4.</span> <span class="nav-text">用戶端 Client side</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%BA%E6%9C%8D%E5%99%A8%E7%AB%AF-Sever-side"><span class="nav-number">1.5.</span> <span class="nav-text">伺服器端 Sever-side</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E9%BA%BC%E6%98%AF-HTTP"><span class="nav-number">2.</span> <span class="nav-text">什麼是 HTTP ?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%96%BC-Restful-API-%E7%9A%84-Http-Request-Method"><span class="nav-number">2.1.</span> <span class="nav-text">基於 Restful API 的 Http Request Method</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%96%BC-Restful-API-%E7%9A%84-Status-Code"><span class="nav-number">2.2.</span> <span class="nav-text">基於 Restful API 的 Status Code</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Restful-API"><span class="nav-number">3.</span> <span class="nav-text">Restful API</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Program-Process-Thread-%E4%B8%89%E8%80%85%E9%97%9C%E4%BF%82"><span class="nav-number">4.</span> <span class="nav-text">Program, Process, Thread 三者關係</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Race-Condition-%E7%AB%B6%E6%85%8B%E6%A2%9D%E4%BB%B6"><span class="nav-number">4.1.</span> <span class="nav-text">Race Condition 競態條件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%80%8F%E8%A6%BD%E5%99%A8"><span class="nav-number">4.2.</span> <span class="nav-text">瀏覽器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%83%E8%80%83-Reference"><span class="nav-number">5.</span> <span class="nav-text">參考 Reference</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%B8%E7%BF%92%E8%B3%87%E6%96%99"><span class="nav-number">6.</span> <span class="nav-text">學習資料</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%80%E6%9B%B8%E6%B8%85%E5%96%AE"><span class="nav-number">7.</span> <span class="nav-text">讀書清單</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookie"><span class="nav-number">7.1.</span> <span class="nav-text">Cookie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B3%87%E6%96%99%E5%9E%8B%E6%85%8B"><span class="nav-number">7.2.</span> <span class="nav-text">資料型態</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaScript"><span class="nav-number">7.3.</span> <span class="nav-text">JavaScript</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CORS-%E8%B7%A8%E4%BE%86%E6%BA%90%E8%B3%87%E6%BA%90%E5%85%B1%E7%94%A8"><span class="nav-number">7.4.</span> <span class="nav-text">CORS 跨來源資源共用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%88%90%E7%82%BA%E7%9C%8B%E8%B5%B7%E4%BE%86%E5%BE%88%E5%BC%B7%E7%9A%84%E5%BE%8C%E7%AB%AF-%E9%96%B1%E8%AE%80%E5%BF%83%E5%BE%97%E7%AD%86%E8%A8%98"><span class="nav-number"></span> <span class="nav-text">成為看起來很強的後端 | 閱讀心得筆記</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Sessions"><span class="nav-number">0.1.</span> <span class="nav-text">Sessions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%92%B0%E5%A2%83%E8%AE%8A%E6%95%B8-environment-varailbe"><span class="nav-number">0.2.</span> <span class="nav-text">環境變數 environment varailbe</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B3%87%E5%AE%89%E5%9F%BA%E6%9C%AC%E8%A7%80%E5%BF%B5"><span class="nav-number">0.3.</span> <span class="nav-text">資安基本觀念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%86%E7%A2%BC%E5%8A%A0%E9%B9%BD-salt"><span class="nav-number">0.4.</span> <span class="nav-text">密碼加鹽 salt</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bcrypt"><span class="nav-number">0.5.</span> <span class="nav-text">Bcrypt</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%91%E5%80%91%E6%80%8E%E9%BA%BC%E5%9F%B7%E8%A1%8C%E4%B8%80%E5%80%8B%E7%80%8F%E8%A6%BD%E5%99%A8"><span class="nav-number">0.6.</span> <span class="nav-text">我們怎麼執行一個瀏覽器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-x2F-IP-%E5%8D%94%E8%AD%B0"><span class="nav-number">0.7.</span> <span class="nav-text">TCP&#x2F;IP 協議</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%87%89%E7%94%A8%E5%B1%A4-Application"><span class="nav-number">1.</span> <span class="nav-text">應用層 Application</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-x2F-HTTPS"><span class="nav-number">1.1.</span> <span class="nav-text">HTTP&#x2F;HTTPS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FTP-x2F-SFTP"><span class="nav-number">1.2.</span> <span class="nav-text">FTP &#x2F; SFTP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Telenet-x2F-x2F-ptt-cc"><span class="nav-number">1.3.</span> <span class="nav-text">Telenet : &#x2F;&#x2F; ptt.cc</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SMTP-x2F-POP3-%E4%BF%A1%E4%BB%B6%E6%94%B6%E7%99%BCEail"><span class="nav-number">1.4.</span> <span class="nav-text">SMTP &#x2F; POP3 信件收發Eail</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WS-x2F-WSS"><span class="nav-number">1.5.</span> <span class="nav-text">WS &#x2F; WSS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SSH"><span class="nav-number">1.6.</span> <span class="nav-text">SSH</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RTSP-x2F-RTMP"><span class="nav-number">1.7.</span> <span class="nav-text">RTSP&#x2F; RTMP</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AC%8A%E9%99%90-101"><span class="nav-number">2.</span> <span class="nav-text">權限 101</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Client-to-Server"><span class="nav-number">2.1.</span> <span class="nav-text">Client to Server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Server-to-Server"><span class="nav-number">2.2.</span> <span class="nav-text">Server to Server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Token-%E6%AC%8A%E6%9D%96-x2F-%E4%BB%A4%E7%89%8C"><span class="nav-number">2.3.</span> <span class="nav-text">Token 權杖&#x2F;令牌</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%9C%E6%B9%8A-Hash-%E5%96%AE"><span class="nav-number">2.4.</span> <span class="nav-text">雜湊 Hash 單</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B7%A8%E7%A2%BC-Encdoe-%E9%9B%99"><span class="nav-number">2.5.</span> <span class="nav-text">編碼 Encdoe 雙</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E5%AF%86-Enarypt-%E9%9B%99-key"><span class="nav-number">2.6.</span> <span class="nav-text">加密 Enarypt 雙 + key</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#API-Key"><span class="nav-number">2.7.</span> <span class="nav-text">API Key</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Http-Basic-Authentication-%E7%99%BB%E5%85%A5%E9%A9%97%E8%AD%89-%E4%BD%86%E6%9C%83%E6%8A%8A-password-%E6%9A%B4%E9%9C%B2%E5%9C%A8%E5%A4%96%E9%9D%A2"><span class="nav-number">2.8.</span> <span class="nav-text">Http Basic Authentication 登入驗證 | 但會把 password 暴露在外面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JWT-x3D-json-web-token"><span class="nav-number">2.9.</span> <span class="nav-text">JWT &#x3D; json web token</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JOSE"><span class="nav-number">2.10.</span> <span class="nav-text">JOSE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookie-%E9%81%8B%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="nav-number">2.11.</span> <span class="nav-text">Cookie 運作方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookie-%E4%BF%9D%E8%AD%B7%E6%96%B9%E5%BC%8F"><span class="nav-number">2.12.</span> <span class="nav-text">Cookie 保護方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cookie-%E5%84%B2%E5%AD%98%E6%96%B9%E5%BC%8F"><span class="nav-number">2.13.</span> <span class="nav-text">Cookie 儲存方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E5%85%A8%E7%9A%84-Token-Cookie"><span class="nav-number">2.14.</span> <span class="nav-text">安全的 Token Cookie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A6%81%E6%80%8E%E9%BA%BC%E9%81%B8%E6%93%87"><span class="nav-number">2.15.</span> <span class="nav-text">要怎麼選擇 ?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Oauth-2"><span class="nav-number">2.16.</span> <span class="nav-text">Oauth 2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%81%8B%E7%AE%97%E6%98%AF%E4%BB%80%E9%BA%BC"><span class="nav-number">2.17.</span> <span class="nav-text">運算是什麼 ?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Webhook"><span class="nav-number">2.18.</span> <span class="nav-text">Webhook</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nell</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/22aliang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;22aliang" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:lisa5566407@gmail.com" title="E-Mail → mailto:lisa5566407@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nell</span>
        
<div class="busuanzi-count">
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="訪客總數">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="總瀏覽次數">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>









<script data-pjax>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script data-pjax>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


    <div id="pjax">
  

  

    </div>
</body>
</html>
